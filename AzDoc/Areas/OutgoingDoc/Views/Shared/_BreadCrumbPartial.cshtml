@using BLL.Common.Enums
@{
    int docType = SessionHelper.DocTypeId;
    int defaultPage = SessionHelper.DefaultPage;

    RouteData routeData = ViewContext.RouteData;

    var routeValueDictionary = new RouteValueDictionary(routeData.Values);

    var _lang = routeValueDictionary["lang"] ?? "az";

    var permissions = Permissions.GetAll(RightType.CreateDoc, RightType.Reserve);
}

<link href="~/Content/fontawesome/css/all.min.css" rel="stylesheet" />
<link href="~/Content/fontawesome/css/v4-shims.min.css" rel="stylesheet" />

<div class="row no-gutters mt-4">
    <div class="">
        <div class="newDocBtn">
            @if (permissions.Has(RightType.CreateDoc))
            {
                <button id="newdoc" class="mBtn mBtn-pr" style="width: 100%"> <i class="fas fa-plus"> @RLang.NewDoc</i></button>
            }
        </div>
    </div>

    <div class="col">
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="\">Ana səhifə</a></li>
                @if (ViewData["DocTypeGroupName"] != null)
                {
                    <li class="breadcrumb-item"><a href="#">@ViewData["DocTypeGroupName"]</a></li>
                }

                <li class="breadcrumb-item active" aria-current="page">
                    @ViewData["DocTypeName"]
                </li>
            </ol>
        </nav>
    </div>

    <div class="col-2 text-right">
        <select id="Period" class="selectpicker" data-width="100%">
            @foreach (var item in SessionHelper.Period)
            {
                <option value="@item.PeriodId">@item.PeriodDescription</option>
            }
        </select>
    </div>
</div>

<script>

    $(document).ready(function() {

        $('[data-toggle="popover"]').popover({
            html: true,
            content: function() {
                return $('#popover-content').html();
            }
        });

        $('.popover-dismiss').popover({
            trigger: 'focus'
        });

        $("#newdoc").click(function() {
            window.location.href = '@Url.Action("AddNewDocument", "Document", new {area = "outgoingdoc", docType = docType})';
        });

        $("#submit").click(function () {
            window.location.href = '@Url.Action("AddNewDocument", "Document", new { area = "outgoingdoc", docType = docType })';
        });

        $("#reserve").click(function () {
            $.ajax({
                method: "GET",
                //data: { id: e},
                // contenType: 'json',
                dataType: 'html',
                url: '@Url.Action("AddReserveDocument", "Document", new { area = "outgoingdoc", docType = docType })',
                beforeSend: function () {
                    window.ShowLoading();
                },
                success: function (response) {
                    $('#dynamiccontext').html(response);
                },
                complete: function() {
                    window.CloseLoading();
                }
            });
        });

    });
</script>